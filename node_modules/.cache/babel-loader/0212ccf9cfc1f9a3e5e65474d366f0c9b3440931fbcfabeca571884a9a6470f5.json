{"ast":null,"code":"import React,{useState}from\"react\";import{supabase}from\"./supabaseClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);async function handleLogin(e){e.preventDefault();setError(\"\");setLoading(true);// curƒÉ»õƒÉm spa»õii »ôi transformƒÉm √Æn litere mici\nconst cleanUsername=username.trim().toLowerCase();console.log(\"üîç Caut username:\",cleanUsername);// cƒÉutƒÉm utilizatorul √Æn tabel (ignor√¢nd litere mari/mici)\nconst{data:users,error:userError}=await supabase.from(\"users\").select(\"email, username\").eq(\"username\",cleanUsername);console.log(\"üì¶ Rezultat cƒÉutare:\",users,\"Eroare:\",userError);if(userError||!users||users.length===0){setError(\"‚ùå Utilizator inexistent!\");setLoading(false);return;}const userEmail=users[0].email;console.log(\"üìß Email gƒÉsit:\",userEmail);const{error:loginError}=await supabase.auth.signInWithPassword({email:userEmail,password});if(loginError){console.error(\"Eroare autentificare:\",loginError);setError(\"‚ùå ParolƒÉ gre»ôitƒÉ!\");}else{window.location.href=\"/\";}setLoading(false);}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:400,margin:\"120px auto\",padding:30,border:\"1px solid #ddd\",borderRadius:10,boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\",background:\"#fff\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\",marginBottom:30},children:\"\\uD83D\\uDD10 Autentificare Flavi Proiectare\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nume utilizator\",value:username,onChange:e=>setUsername(e.target.value),style:inputStyle,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Parol\\u0103\",value:password,onChange:e=>setPassword(e.target.value),style:inputStyle,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{width:\"100%\",padding:10,background:loading?\"#9ca3af\":\"#1f2937\",color:\"white\",border:\"none\",borderRadius:5,cursor:\"pointer\"},children:loading?\"Se conecteazƒÉ...\":\"Autentificare\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",marginTop:15},children:error})]});}const inputStyle={width:\"100%\",marginBottom:15,padding:10,border:\"1px solid #ccc\",borderRadius:5};","map":{"version":3,"names":["React","useState","supabase","jsx","_jsx","jsxs","_jsxs","Login","username","setUsername","password","setPassword","error","setError","loading","setLoading","handleLogin","e","preventDefault","cleanUsername","trim","toLowerCase","console","log","data","users","userError","from","select","eq","length","userEmail","email","loginError","auth","signInWithPassword","window","location","href","style","maxWidth","margin","padding","border","borderRadius","boxShadow","background","children","textAlign","marginBottom","onSubmit","type","placeholder","value","onChange","target","inputStyle","required","disabled","width","color","cursor","marginTop"],"sources":["C:/Users/gheor/Desktop/flavi-proiectare-layout/src/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { supabase } from \"./supabaseClient\";\r\n\r\nexport default function Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function handleLogin(e) {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    // curƒÉ»õƒÉm spa»õii »ôi transformƒÉm √Æn litere mici\r\n    const cleanUsername = username.trim().toLowerCase();\r\n\r\n    console.log(\"üîç Caut username:\", cleanUsername);\r\n\r\n    // cƒÉutƒÉm utilizatorul √Æn tabel (ignor√¢nd litere mari/mici)\r\n    const { data: users, error: userError } = await supabase\r\n      .from(\"users\")\r\n      .select(\"email, username\")\r\n      .eq(\"username\", cleanUsername);\r\n\r\n    console.log(\"üì¶ Rezultat cƒÉutare:\", users, \"Eroare:\", userError);\r\n\r\n    if (userError || !users || users.length === 0) {\r\n      setError(\"‚ùå Utilizator inexistent!\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const userEmail = users[0].email;\r\n    console.log(\"üìß Email gƒÉsit:\", userEmail);\r\n\r\n    const { error: loginError } = await supabase.auth.signInWithPassword({\r\n      email: userEmail,\r\n      password,\r\n    });\r\n\r\n    if (loginError) {\r\n      console.error(\"Eroare autentificare:\", loginError);\r\n      setError(\"‚ùå ParolƒÉ gre»ôitƒÉ!\");\r\n    } else {\r\n      window.location.href = \"/\";\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        maxWidth: 400,\r\n        margin: \"120px auto\",\r\n        padding: 30,\r\n        border: \"1px solid #ddd\",\r\n        borderRadius: 10,\r\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n        background: \"#fff\",\r\n      }}\r\n    >\r\n      <h2 style={{ textAlign: \"center\", marginBottom: 30 }}>\r\n        üîê Autentificare Flavi Proiectare\r\n      </h2>\r\n\r\n      <form onSubmit={handleLogin}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nume utilizator\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          style={inputStyle}\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"ParolƒÉ\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          style={inputStyle}\r\n          required\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          style={{\r\n            width: \"100%\",\r\n            padding: 10,\r\n            background: loading ? \"#9ca3af\" : \"#1f2937\",\r\n            color: \"white\",\r\n            border: \"none\",\r\n            borderRadius: 5,\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          {loading ? \"Se conecteazƒÉ...\" : \"Autentificare\"}\r\n        </button>\r\n      </form>\r\n\r\n      {error && <p style={{ color: \"red\", marginTop: 15 }}>{error}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst inputStyle = {\r\n  width: \"100%\",\r\n  marginBottom: 15,\r\n  padding: 10,\r\n  border: \"1px solid #ccc\",\r\n  borderRadius: 5,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}